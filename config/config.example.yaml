# Crypto Trading Bot Configuration
# Copy this file to config.yaml and edit with your settings

# Logging level: DEBUG, INFO, WARNING, ERROR
log_level: INFO

# Exchange configurations
exchanges:
  binance:
    api_key: "your_api_key_here"
    api_secret: "your_api_secret_here"
    sandbox: false  # Use testnet if available
    
  # Add more exchanges as needed:
  # kraken:
  #   api_key: "your_api_key"
  #   api_secret: "your_api_secret"

# Backtesting settings
backtesting:
  default_capital: 10000
  fee_percent: 0.1          # Trading fee in percent
  slippage_percent: 0.05    # Simulated slippage
  default_timeframe: "1h"   # Default timeframe for backtests

# Strategy configurations
strategies:
  ma_crossover:
    fast_period: 9
    slow_period: 21
  
  rsi:
    period: 14
    overbought: 70
    oversold: 30
  
  macd:
    fast_period: 12
    slow_period: 26
    signal_period: 9
  
  bollinger:
    period: 20
    std_dev: 2.0

# Strategy filters (NEW)
strategy_filters:
  # Multi-timeframe confirmation
  multi_timeframe:
    enabled: false
    confirmation_timeframes: ["4h", "1d"]
    require_all: false
    min_confirmations: 1
  
  # Market regime detection
  regime_detection:
    enabled: false
    adx_threshold: 25
    # Allowed regimes for trading (trending_bullish, trending_bearish, ranging, high_volatility)
    allowed_regimes:
      - trending_bullish
      - trending_bearish

# Notification settings
notifications:
  # Telegram Bot API
  telegram:
    enabled: false
    bot_token: "your_bot_token"  # Get from @BotFather
    chat_id: "your_chat_id"      # Get from @userinfobot
  
  # Discord Webhooks
  discord:
    enabled: false
    webhook_url: "your_webhook_url"
  
  # Email via SMTP (NEW)
  email:
    enabled: false
    smtp_server: "smtp.gmail.com"
    smtp_port: 587
    username: "your_email@gmail.com"
    password: "your_app_password"  # Use App Password for Gmail
    from_address: "your_email@gmail.com"
    to_addresses:
      - "recipient@example.com"
    use_tls: true
  
  # WhatsApp via Twilio (NEW)
  whatsapp:
    enabled: false
    twilio_account_sid: "your_account_sid"
    twilio_auth_token: "your_auth_token"
    from_number: "whatsapp:+14155238886"  # Twilio sandbox number
    to_numbers:
      - "whatsapp:+1234567890"  # Your WhatsApp number
  
  # Alert routing - which channels for which alerts (NEW)
  routing:
    trades: ["telegram", "discord"]
    errors: ["telegram", "discord", "email", "whatsapp"]
    daily_summary: ["email", "discord"]
    backtest: ["telegram", "discord"]

# API Server settings (NEW)
api:
  host: "127.0.0.1"
  port: 8765
  # Enable API key authentication (recommended for production)
  auth_enabled: false
  # API key for authentication. Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
  # Can also be set via TRADING_BOT_API_KEY environment variable
  api_key: ""

# Database settings (NEW)
database:
  path: "data/trading.db"

# Data cache settings
data:
  cache_directory: "data/ohlcv"
  max_cache_age_days: 7  # Re-download data older than this

# Supervisor settings (NEW)
supervisor:
  enabled: false
  max_restarts: 5           # Max restarts in window before giving up
  restart_window: 300       # Time window in seconds (5 minutes)
  initial_delay: 1.0        # Initial delay before restart (seconds)
  max_delay: 60.0           # Maximum delay between restarts

# ML Signal Filter (NEW)
ml_filter:
  enabled: false
  model_type: "gradient_boosting"  # "gradient_boosting", "random_forest", or "lstm"
  model_path: "data/models/"
  confidence_threshold: 0.55
  retrain_interval_hours: 168  # Re-train every week

# Sentiment Analysis Filter (NEW)
sentiment:
  enabled: false
  fear_greed_threshold: 25     # Block buys when FNG below this
  greed_threshold: 75          # Block sells when FNG above this
  news_api_key: ""             # CryptoCompare API key (optional, free tier)
  news_sentiment_weight: 0.3   # 0 = ignore news, 1 = news only
  contrarian: false            # Invert logic (buy fear, sell greed)
  cache_ttl_minutes: 30

# Strategy Optimizer (NEW)
optimizer:
  enabled: false
  metric: "sharpe_ratio"       # Metric to maximise: sharpe_ratio, total_return_pct, profit_factor
  n_trials: 100                # Optuna trials per optimisation run
  retrain_every_bars: 168      # Adaptive re-optimisation interval
